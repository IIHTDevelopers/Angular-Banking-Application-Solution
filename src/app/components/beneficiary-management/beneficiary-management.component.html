<div>
    <h2>Beneficiary Management</h2>

    <button (click)="openAddMode()">Add Beneficiary</button>

    <ul>
        <li *ngFor="let beneficiary of beneficiaries">
            {{ beneficiary.accountHolderName }}
            <button (click)="openEditMode(beneficiary)">Edit</button>
            <button (click)="deleteBeneficiary(beneficiary.id)">Delete</button>
        </li>
    </ul>

    <div *ngIf="selectedBeneficiary">

        <div>
            <h2>{{ isAddMode ? 'Add Beneficiary' : 'Edit Beneficiary' }}</h2>
            <form #beneficiaryForm="ngForm" (ngSubmit)="saveBeneficiary()">
                <div>
                    <label for="accountHolderName">AccountHolderName:</label>
                    <input type="text" id="accountHolderName" name="accountHolderName" required
                        [(ngModel)]="selectedBeneficiary.accountHolderName">
                    <div
                        *ngIf="beneficiaryForm.controls['accountHolderName']?.invalid && (beneficiaryForm.controls['accountHolderName']?.dirty || beneficiaryForm.controls['accountHolderName']?.touched)">
                        AccountHolderName is required
                    </div>
                </div>
                <div>
                    <label for="accountNumber">Account Number:</label>
                    <input type="text" id="accountNumber" name="accountNumber" required
                        [(ngModel)]="selectedBeneficiary.accountNumber">
                    <div
                        *ngIf="beneficiaryForm.controls['accountNumber']?.invalid && (beneficiaryForm.controls['accountNumber']?.dirty || beneficiaryForm.controls['accountNumber']?.touched)">
                        Account Number is required
                    </div>
                </div>
                <div>
                    <label for="bankName">Bank Name:</label>
                    <input type="text" id="bankName" name="bankName" required
                        [(ngModel)]="selectedBeneficiary.bankName">
                    <div
                        *ngIf="beneficiaryForm.controls['bankName']?.invalid && (beneficiaryForm.controls['bankName']?.dirty || beneficiaryForm.controls['bankName']?.touched)">
                        Bank Name is required
                    </div>
                </div>
                <div>
                    <label for="ifscCode">ifscCode:</label>
                    <input type="text" id="ifscCode" name="ifscCode" required
                        [(ngModel)]="selectedBeneficiary.ifscCode">
                    <div
                        *ngIf="beneficiaryForm.controls['ifscCode']?.invalid && (beneficiaryForm.controls['ifscCode']?.dirty || beneficiaryForm.controls['ifscCode']?.touched)">
                        ifscCode Code is required
                    </div>
                </div>
            </form>
        </div>

        <button (click)="saveBeneficiary()">Save</button>
        <button (click)="cancelEdit()">Cancel</button>
    </div>
</div>